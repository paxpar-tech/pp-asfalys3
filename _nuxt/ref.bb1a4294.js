import{d as M,Q as D,P as I,r as O,o as T,b as l,c as i,e as s,t,K as a,F as C,a1 as U}from"./entry.1b7ba420.js";import{u as $}from"./usePaxparAPI.0b4d6eb5.js";import"./fetch.3de3d3da.js";import"./url.6edfad5e.js";import"./useToast.2a8aaca6.js";const j={class:"grid grid-flow-col gap-5 text-center auto-cols-max m-4"},x={class:"stats shadow"},A={class:"stat"},K={class:"stat-value"},L=s("div",{class:"stat-title"},"refresh",-1),N={class:"stats shadow"},Q={class:"stat"},V={class:"stat-value"},q=s("div",{class:"stat-title"},"objects",-1),z={class:"stats shadow"},G={class:"stat"},H={class:"stat-value"},J=s("div",{class:"stat-title"},"checklists",-1),W={class:"stats shadow"},X={class:"stat"},Y={class:"stat-value"},Z=s("div",{class:"stat-title"},"checkmodules",-1),ss={class:"stats shadow"},ts={class:"stat"},os={class:"stat-value"},as=s("div",{class:"stat-title"},"craftforms",-1),es={class:"stats shadow"},cs={class:"stat"},ds={class:"stat-value"},ls=s("div",{class:"stat-title"},"exceptions",-1),is={class:"stats shadow"},ns={class:"stat"},_s={class:"stat-value"},rs=s("div",{class:"stat-title"},"unknown",-1),hs={class:"stats shadow"},vs={class:"stat"},us={class:"stat-value"},ms=s("div",{class:"stat-title"},"s for refresh",-1),fs={class:"stats shadow"},ps={class:"stat"},bs={class:"stat-value"},ys=s("div",{class:"stat-title"},"s for sync",-1),ws={class:"stats shadow"},ks={class:"stat"},gs={class:"stat-value"},Ss=s("div",{class:"stat-title"},"errorcode",-1),Ps={class:"collapse collapse-arrow bg-base-200 m-2"},Bs=s("input",{type:"radio",name:"my-accordion-2"},null,-1),Cs=s("div",{class:"collapse-title text-xl font-medium"},"stdout",-1),Rs={class:"collapse-content"},Es={class:"mockup-code"},Fs={class:"collapse collapse-arrow bg-base-200 m-2"},Ms=s("input",{type:"radio",name:"my-accordion-2"},null,-1),Ds=s("div",{class:"collapse-title text-xl font-medium"},"stderr",-1),Is={class:"collapse-content"},Os={class:"mockup-code"},Ts={class:"collapse collapse-arrow bg-base-200 m-2"},Us=s("input",{type:"radio",name:"my-accordion-2"},null,-1),$s={class:"collapse-title text-xl font-medium"},js={class:"collapse-content"},xs={class:"mockup-code"},qs=M({__name:"ref",setup(As){const n=D();I();const{useFetchPP:_}=$();var d;const o=O();T(()=>{console.log({client:n}),d=n.realtime.channel("broadcast-test"),d.on("broadcast",{event:"some-event"},c=>console.log(c)),d.subscribe(async(c,r)=>{c==="SUBSCRIBED"?await d.send({type:"broadcast",event:"some-event",payload:{hello:"init"}}):console.log(`unknown status ${c}, err = ${r}`)})});async function R(){o.value=(await _("/api/ref/sync",{method:"POST"})).data.value}async function E(){o.value=(await _("/api/ref/refresh",{method:"POST"})).data.value}return(c,r)=>{var h,v,u,m,f,p,b,y,w,k,g,S,P,B;return l(),i(C,null,[s("div",j,[s("button",{onClick:E,class:"btn btn-primary"},"ref refresh"),s("button",{onClick:R,class:"btn btn-primary"},"ref sync+refresh"),s("div",x,[s("div",A,[s("div",K,t((h=a(o))==null?void 0:h.nb_refresh),1),L])]),s("div",N,[s("div",Q,[s("div",V,t((v=a(o))==null?void 0:v.nb),1),q])]),s("div",z,[s("div",G,[s("div",H,t((u=a(o))==null?void 0:u.nb_checklist),1),J])]),s("div",W,[s("div",X,[s("div",Y,t((m=a(o))==null?void 0:m.nb_checkmodule),1),Z])]),s("div",ss,[s("div",ts,[s("div",os,t((f=a(o))==null?void 0:f.nb_craftform),1),as])]),s("div",es,[s("div",cs,[s("div",ds,t((b=(p=a(o))==null?void 0:p.exceptions)==null?void 0:b.length),1),ls])]),s("div",is,[s("div",ns,[s("div",_s,t((y=a(o))==null?void 0:y.nb_unknown),1),rs])]),s("div",hs,[s("div",vs,[s("div",us,t(Math.round((w=a(o))==null?void 0:w.refresh_duration)),1),ms])]),s("div",fs,[s("div",ps,[s("div",bs,t(Math.round((k=a(o))==null?void 0:k.sync_duration)),1),ys])]),s("div",ws,[s("div",ks,[s("div",gs,t((g=a(o))==null?void 0:g.sync_errorcode),1),Ss])])]),s("div",Ps,[Bs,Cs,s("div",Rs,[s("div",Es,[s("pre",null,[s("code",null,t((S=a(o))==null?void 0:S.sync_stdout),1)])])])]),s("div",Fs,[Ms,Ds,s("div",Is,[s("div",Os,[s("pre",null,[s("code",null,t((P=a(o))==null?void 0:P.sync_stderr),1)])])])]),(l(!0),i(C,null,U((B=a(o))==null?void 0:B.exceptions,(e,F)=>(l(),i("div",Ts,[Us,s("div",$s," Exception "+t(F+1)+" : "+t(e==null?void 0:e.name)+" : "+t(e==null?void 0:e.msg),1),s("div",js,[s("div",xs,[s("pre",null,[s("code",null,t(e==null?void 0:e.traceback),1)])])])]))),256))],64)}}});export{qs as default};
