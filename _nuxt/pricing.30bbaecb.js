import{d as R,s as T,u as U,V as H,x as O,E as z,r as c,M as D,a0 as E,o as I,ae as P,K as u,b as a,c as i,g as k,e,t as S,W as K,X as W,f as p,n as C,L as X,j as F,O as G}from"./entry.b5be8022.js";import{_ as J}from"./main.vue.9bca8190.js";import"./head.vue.966e99b6.js";import"./cell.vue.b6a894d4.js";import"./tail.vue.e54462f0.js";const Q={key:0},Y={key:1,class:"w-full"},Z={key:0},ee={class:"body-font overflow-hidden"},te={key:0},se={key:1,class:"container px-5 py-24 mx-auto"},ae={class:"flex flex-col text-center w-full mb-20"},ne=e("h1",{class:"sm:text-4xl text-3xl font-medium title-font mb-2"},"Tarifs",-1),oe=e("p",{class:"lg:w-2/3 mx-auto leading-relaxed text-base"},"Les services sont payables mensuellement ou annuellement.",-1),ie={key:0,class:"alert alert-error shadow-lg"},re=["innerHTML"],me=R({__name:"pricing",setup(le){var h,b,g,f;const{$fetch2:q}=F(),n=T(),j=U(),L=H(),_=O();z({script:["https://js.stripe.com/v3/pricing-table.js"]});const m=(b=(h=_.paxpar)==null?void 0:h.stripe)==null?void 0:b.pricing_table_id,M=(f=(g=_.paxpar)==null?void 0:g.stripe)==null?void 0:f.publishable_key,d=c(n.query.url),v=c(parseInt(Array.isArray(n.query.sheet_name)?n.query.sheet_name[0]:`0${n.query.sheet_name}`)),r=c(!0),A=c(!0),o=c(!0),t=D({});E(d,(s,l)=>{j.push({query:{preview:"",url:s}})}),I(async()=>{n.query.preview===void 0?await V():await y()});async function V(){o.value=!0;const s=await $fetch("/data/pricing.json");console.log("do_pricing_load ...",s),Object.assign(t,s),o.value=!1}async function y(){o.value=!0;const s=await q("/api/ref/pricing/convert",{params:{preview:!0,url:d.value,sheet_name:v.value}});Object.assign(t,s),o.value=!1}return(s,l)=>{var x;const $=P("stripe-pricing-table"),B=G,N=J;return u(m)?(a(),i("div",Q,[k($,{"pricing-table-id":u(m),"publishable-key":u(M),"customer-email":(x=u(L))==null?void 0:x.email},null,8,["pricing-table-id","publishable-key","customer-email"])])):(a(),i("div",Y,[u(n).query.preview!==void 0?(a(),i("section",Z,[e("h1",null,"Preview URL sheet_name = "+S(v.value),1),K(e("textarea",{"onUpdate:modelValue":l[0]||(l[0]=w=>d.value=w),class:"textarea textarea-bordered",placeholder:"pricing excel doc URL"},null,512),[[W,d.value]]),e("button",{onClick:y,class:"btn"},"Preview")])):p("",!0),e("section",ee,[o.value?(a(),i("div",te," Chargement ... ")):p("",!0),o.value?p("",!0):(a(),i("div",se,[e("div",ae,[ne,oe,e("div",{onClick:l[1]||(l[1]=w=>r.value=!r.value),class:"flex mx-auto border-2 border-primary rounded overflow-hidden mt-6"},[e("button",{class:C([r.value?"bg-primary":"","py-1 px-4 focus:outline-none"])},"Mensuel",2),e("button",{class:C([r.value?"":"bg-primary","py-1 px-4 focus:outline-none"])},"Annuel",2)])]),t!=null&&t.msg?(a(),i("div",ie,[e("div",null,[k(B,{size:"36",name:t.msg.icon},null,8,["name"]),e("span",{innerHTML:t.msg.msg},null,8,re)])])):p("",!0),A.value?(a(),X(N,{key:1,pricing:t,monthly:r.value,class:"my-16"},null,8,["pricing","monthly"])):p("",!0)]))])]))}}});export{me as default};
