import{d as A,V as N,x as L,U,N as B,ap as D,az as F,b as s,c as r,e as t,F as x,$ as I,t as e,K as i,g as n,w as f,L as S,G as d,H as V}from"./entry.7b81283e.js";import $ from"./Alert.15fdad42.js";import{_ as R}from"./metric.vue.99616d90.js";import{u as G}from"./usePaxparAPI.3519fc4b.js";const T=t("p",null,"My subscriptions :",-1),q={class:"overflow-x-auto"},z={class:"table"},E=t("thead",null,[t("tr",null,[t("th"),t("th",null,"id"),t("th",null,"customer"),t("th",null,"product"),t("th",null,"price"),t("th",null,"start"),t("th",null,"end")])],-1),H={class:"hover"},K={key:0},M=t("p",null,[d("Go to "),t("a",{href:""},"stripe customer portal"),d(" ...")],-1),j=t("button",{class:"btn btn-primary"},"Stripe Customer portal",-1),J=t("p",null,"This month activity ...",-1),tt=A({__name:"plan",async setup(O){var p,m;let o,_;const u=N(),y=L(),k=U(),{domain:b}=G(),c=(m=(p=y.paxpar)==null?void 0:p.stripe)==null?void 0:m.customer_portal,w=B(()=>u?`${c}?prefilled_email=${encodeURIComponent(u.value.email)}`:c),{data:C}=([o,_]=D(async()=>F("subscriptions2",async()=>{const{data:h}=await k.from("subscriptions").select("id, domain, customer_id, price_id, product_id, date_start, date_end").eq("domain",b);return h})),o=await o,_(),o);return(h,Q)=>{const g=V,P=$,l=R;return s(),r(x,null,[T,t("div",q,[t("table",z,[E,t("tbody",null,[(s(!0),r(x,null,I(i(C),(a,v)=>(s(),r("tr",H,[t("th",null,e(v+1),1),t("td",null,e(a.id),1),t("td",null,e(a.customer_id),1),t("td",null,e(a.product_id),1),t("td",null,e(a.price_id),1),t("td",null,e(a.date_start),1),t("td",null,e(a.date_end),1)]))),256))])])]),i(c)?(s(),r("div",K,[M,n(g,{to:i(w),target:"_blank"},{default:f(()=>[j]),_:1},8,["to"])])):(s(),S(P,{key:1,type:"warning"},{default:f(()=>[d("No stripe customer portal defined !")]),_:1})),J,n(l,{name:"xxx",title:"API calls",desc:"/ 10.000",fake:""}),n(l,{name:"xxx",title:"API burts",desc:"/ 20 / mn",fake:""}),n(l,{name:"xxx",title:"PDF cheecked",desc:"unlimited",fake:""}),n(l,{name:"xxx",title:"PDF crafted",desc:"unlimited",fake:""})],64)}}});export{tt as _};
