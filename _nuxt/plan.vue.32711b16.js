import{d as A,P as N,x as L,Q as B,N as D,a2 as F,a3 as I,b as s,c as r,e as t,F as x,a1 as S,t as e,K as i,g as n,w as f,L as U,G as d,H as R}from"./entry.1b7ba420.js";import V from"./Alert.e3a844f3.js";import{_ as $}from"./metric.vue.da4fee41.js";import{u as G}from"./usePaxparAPI.0b4d6eb5.js";const T=t("p",null,"My subscriptions :",-1),q={class:"overflow-x-auto"},E={class:"table"},H=t("thead",null,[t("tr",null,[t("th"),t("th",null,"id"),t("th",null,"customer"),t("th",null,"product"),t("th",null,"price"),t("th",null,"start"),t("th",null,"end")])],-1),K={class:"hover"},M={key:0},Q=t("p",null,[d("Go to "),t("a",{href:""},"stripe customer portal"),d(" ...")],-1),j=t("button",{class:"btn btn-primary"},"Stripe Customer portal",-1),z=t("p",null,"This month activity ...",-1),tt=A({__name:"plan",async setup(J){var p,m;let o,_;const u=N(),y=L(),k=B(),{domain:b}=G(),c=(m=(p=y.paxpar)==null?void 0:p.stripe)==null?void 0:m.customer_portal,w=D(()=>u?`${c}?prefilled_email=${encodeURIComponent(u.value.email)}`:c),{data:C}=([o,_]=F(async()=>I("subscriptions2",async()=>{const{data:h}=await k.from("subscriptions").select("id, domain, customer_id, price_id, product_id, date_start, date_end").eq("domain",b);return h})),o=await o,_(),o);return(h,O)=>{const P=R,g=V,l=$;return s(),r(x,null,[T,t("div",q,[t("table",E,[H,t("tbody",null,[(s(!0),r(x,null,S(i(C),(a,v)=>(s(),r("tr",K,[t("th",null,e(v+1),1),t("td",null,e(a.id),1),t("td",null,e(a.customer_id),1),t("td",null,e(a.product_id),1),t("td",null,e(a.price_id),1),t("td",null,e(a.date_start),1),t("td",null,e(a.date_end),1)]))),256))])])]),i(c)?(s(),r("div",M,[Q,n(P,{to:i(w),target:"_blank"},{default:f(()=>[j]),_:1},8,["to"])])):(s(),U(g,{key:1,type:"warning"},{default:f(()=>[d("No stripe customer portal defined !")]),_:1})),z,n(l,{name:"xxx",title:"API calls",desc:"/ 10.000",fake:""}),n(l,{name:"xxx",title:"API burts",desc:"/ 20 / mn",fake:""}),n(l,{name:"xxx",title:"PDF cheecked",desc:"unlimited",fake:""}),n(l,{name:"xxx",title:"PDF crafted",desc:"unlimited",fake:""})],64)}}});export{tt as _};
